import{v as x,_ as S}from"./CykZkBfp.js";import{_ as R}from"./5D1c3s59.js";import{u as C}from"./Byr2579q.js";import{f as L,y as c,ah as U,Q as k,o as A,c as B,a as i,b as l,i as m,j as d,w as g,d as w}from"./DzQTS_Et.js";import{e as r}from"./Dnc2z6XF.js";import{u as y,a as N}from"./CYGPWBJy.js";const j={class:"flex items-center justify-center min-h-screen"},E={class:"rounded bg-sidebar w-1/4 p-5"},M=i("h1",{class:"text-2xl font-bold text-center mb-5"},"Login",-1),I={class:"flex items-center justify-center gap-5"},D=L({__name:"login",setup(P){const p=y();C({title:"Login | CRM System"});const s=c(""),a=c(""),o=c(""),f=N(),V=y(),h=U();k(async()=>{p.isAuth&&(await r.deleteSession("current"),p.clear())});const _=async({req:v,res:t,error:n,log:u})=>{v.headers={"Access-Control-Allow-Origin":"*"},f.set(!0),await r.createEmailPasswordSession(s.value,a.value);const e=await r.get();e&&V.set({email:e.email,name:e.name,status:e.status}),s.value="",a.value="",o.value="",await h.push("/"),f.set(!1)},b=async()=>{await r.create(x(),s.value,a.value,o.value),await _()};return(v,t)=>{const n=S,u=R;return A(),B("div",j,[i("div",E,[M,i("form",null,[l(n,{modelValue:m(s),"onUpdate:modelValue":t[0]||(t[0]=e=>d(s)?s.value=e:null),placeholder:"Email",type:"email",class:"mb-3"},null,8,["modelValue"]),l(n,{modelValue:m(a),"onUpdate:modelValue":t[1]||(t[1]=e=>d(a)?a.value=e:null),placeholder:"Password",type:"password",class:"mb-3"},null,8,["modelValue"]),l(n,{modelValue:m(o),"onUpdate:modelValue":t[2]||(t[2]=e=>d(o)?o.value=e:null),placeholder:"Name",type:"name",class:"mb-3"},null,8,["modelValue"]),i("div",I,[l(u,{type:"button",onClick:_},{default:g(()=>[w("Login")]),_:1}),l(u,{type:"button",onClick:b},{default:g(()=>[w("Register")]),_:1})])])])])}}});export{D as default};
