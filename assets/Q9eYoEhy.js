import{_ as q,v as L}from"./6Gj_VAqf.js";import{_ as j}from"./BmNdRfT7.js";import{u as G}from"./CffuVsdz.js";import{f as Q,g as z,h as H,o as x,c as I,a as l,t as D,i as e,b as o,m as p,j as _,k as J,w as W,d as X,p as Y,e as Z,_ as ee}from"./CeNTFR7v.js";import{u as te,a as w}from"./C3WiWKmJ.js";import{D as F,a as C,C as U,s as B,S as E}from"./Dnc2z6XF.js";import{u as ae}from"./Bptbd1qp.js";const se=n=>(Y("data-v-53d9738d"),n=n(),Z(),n),oe={class:"p-10"},le={class:"font-bold text-2xl mb-10"},ne=["src"],ue={class:"grid w-full max-w-sm items-center gap-1.5 input"},me=se(()=>l("div",{class:"text-sm mb-2"},"Логотип",-1)),re=Q({__name:"[id]",setup(n){G({title:"Редактирование компании"});const u=z().params.id,{handleSubmit:N,defineField:r,setFieldValue:k,setValues:A,values:f}=te(),{data:g,isSuccess:O}=ae({queryKey:["get customer",u],queryFn:()=>F.getDocument(C,U,u)});H(O,()=>{const t=g.value;A({email:t.email,avatar_url:t.avatar_url,from_source:t.from_source||"",name:t.name})});const[i,P]=r("name"),[d,R]=r("email"),[c,T]=r("from_source"),{mutate:K,isPending:v}=w({mutationKey:["update customer",u],mutationFn:t=>F.updateDocument(C,U,u,t)}),{mutate:M,isPending:S}=w({mutationKey:["upload image"],mutationFn:t=>B.createFile(E,L(),t),onSuccess(t){const s=B.getFileDownload(E,t.$id);k("avatar_url",s.href)}}),h=N(t=>{K(t)});return(t,s)=>{var V;const m=q,$=j;return x(),I("div",oe,[l("h1",le," Редактирование "+D((V=e(g))==null?void 0:V.name),1),l("form",{onSubmit:s[3]||(s[3]=(...a)=>e(h)&&e(h)(...a)),class:"form"},[o(m,p({placeholder:"Наименование",modelValue:e(i),"onUpdate:modelValue":s[0]||(s[0]=a=>_(i)?i.value=a:null)},e(P),{type:"text",class:"input"}),null,16,["modelValue"]),o(m,p({placeholder:"Email",modelValue:e(d),"onUpdate:modelValue":s[1]||(s[1]=a=>_(d)?d.value=a:null)},e(R),{type:"text",class:"input"}),null,16,["modelValue"]),o(m,p({placeholder:"Откуда пришел?",modelValue:e(c),"onUpdate:modelValue":s[2]||(s[2]=a=>_(c)?c.value=a:null)},e(T),{type:"text",class:"input"}),null,16,["modelValue"]),e(f).avatar_url||e(S)?(x(),I("img",{key:0,src:e(f).avatar_url,alt:"",width:"50",height:"50",class:"rounded-full my-4"},null,8,ne)):J("",!0),l("div",ue,[l("label",null,[me,o(m,{type:"file",onchange:a=>{var y,b;return((b=(y=a==null?void 0:a.target)==null?void 0:y.files)==null?void 0:b.length)&&e(M)(a.target.files[0])},disabled:e(S)},null,8,["onchange","disabled"])])]),o($,{disabled:e(v),variant:"secondary",class:"mt-3"},{default:W(()=>[X(D(e(v)?"Загрузка...":"Сохранить"),1)]),_:1},8,["disabled"])],32)])}}}),Se=ee(re,[["__scopeId","data-v-53d9738d"]]);export{Se as default};
